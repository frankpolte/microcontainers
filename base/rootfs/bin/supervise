#!/bin/sh
#
# Wrapper for monit start
#
# (c) 2017 Martin Haso≈à <martin.hason@gmail.com>

set -e

monit -l /dev/stdout

while [ "$(pgrep -x monit)" = "" ]; do
    sleep 1
done

while [ x"$1" != x ]; do
    monit start "$1"
    shift
done

while [ "$(pgrep -x monit)" != "" ]; do
    sleep 3
done

exit 1
